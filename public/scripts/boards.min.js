function editor(e){if("undefined"==typeof Jodit){return new Promise(function(t,n){setTimeout(function(){t(editor(e))})})}return new Jodit(e,{autofocus:!0,height:"280",toolbarAdaptive:1,allowResizeX:!1,allowResizeY:!1})}function isFunction(e){return!(!e||"[object Function]"!=={}.toString.call(e))}class Boards{constructor(){this.scripts=assets+"/scripts/"}ready(e){"complete"===document.readyState||"interactive"===document.readyState?setTimeout(e,1):document.addEventListener("DOMContentLoaded",e)}objectExistById(e){return new Promise(function(t,n){t(null!==document.getElementById(e))})}click(e,t){document.querySelector(e).addEventListener("click",t,!1)}appendHtml(e,t){"object"!=typeof e&&(e=document.querySelector(e));let n=document.createElement("div");n.innerHTML=t,e.insertAdjacentElement("beforeend",n)}prependHtml(e,t){"object"!=typeof e&&(e=document.querySelector(e));let n=document.createElement("div");n.innerHTML=t,e.insertAdjacentElement("beforebegin",n)}getHeight(e,t="height"){if("inner"===t)return e.clientHeight;if("outer"===t)return e.offsetHeight;const n=window.getComputedStyle(e,null);return"height"!==t&&t?"full"===t?e.offsetHeight+parseInt(n.getPropertyValue("margin-top"))+parseInt(n.getPropertyValue("margin-bottom")):null:e.clientHeight-parseInt(n.getPropertyValue("padding-top"))-parseInt(n.getPropertyValue("padding-bottom"))}show(e,t=300,n="flex"){"object"!=typeof e&&(e=document.querySelector(e)),e.style.display=n,e.style.visibility="visible",e.setAttribute("data-visibility","show"),setTimeout(function(){e.style.opacity=1},t)}hide(e,t=300){"object"!=typeof e&&(e=document.querySelector(e)),e.style.opacity=0,setTimeout(function(){e.style.display="none",e.style.visibility="hidden",e.setAttribute("data-visibility","hide")},t)}toggle(e,t){document.querySelector(e).classList.toggle(t)}ajax(e){return new Promise((t,n)=>{let o,r=!1;if("undefined"===e.data)o=null;else for(var i in o=new FormData,e.data)o.append(i,e.data[i]);if(window.XMLHttpRequest)(r=new XMLHttpRequest).overrideMimeType&&r.overrideMimeType("text/"+e.type);else if(window.ActiveXObject)try{r=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{r=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}if(!r)return console.log("Creating instance of XMLHTTP error!"),!1;r.onreadystatechange=function(){4===r.readyState&&(201===r.status||200===r.status?!0===isFunction(e.success)&&e.success(JSON.parse(r.responseText)):!0===isFunction(e.error)&&e.error(r.responseText))},r.onload=(()=>t(r.responseText)),r.onerror=(()=>n(r.statusText)),r.open(e.method,e.url,!0),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.send(o)})}getScript(e,t=1,n){let o=document.createElement("script"),r=document.getElementsByTagName("script")[0];o.async=t,o.onload=o.onreadystatechange=function(e,t){(t||!o.readyState||/loaded|complete/.test(o.readyState))&&(o.onload=o.onreadystatechange=null,o=void 0,!t&&n&&setTimeout(n,0))},o.src=e,r.parentNode.insertBefore(o,r)}getStyle(e){let t=document.head,n=document.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=assets+"/css/"+e,t.appendChild(n)}async initJodit(e){return"object"!=typeof e&&(e=document.querySelector(e)),this.getScript(this.scripts+"jodit.min.js"),this.getStyle("jodit.min.css"),await editor(e).then(e=>{this.jodit=e})}initMessenger(){}setNewPlot(e){let t=document.getElementById("csrf_name").value,n=document.getElementById("csrf_value").value;this.ajax({method:"POST",url:ajaxUrl,data:{module:"plot",route:"set",topic:e.topic,content:e.content,board_id:e.id,csrf_name:t,csrf_value:n},type:"json",error:function(e){alert("error"),console.log(e)},success:function(e){e.redirect&&window.location.replace(e.redirect),e.warn&&alert(e.warn)}})}post(e){let t=document.getElementById("csrf_name").value,n=document.getElementById("csrf_value").value;return this.ajax({method:"POST",url:ajaxUrl,data:{module:"plot",route:e.route,id:e.id,url:e.url,csrf_name:t,csrf_value:n},type:"json",error:function(e){alert("error"),console.log(e)},success:function(e){return e}})}}let B=new Boards;