const darkSwitch = document.getElementById("darkSwitch");
function initTheme() {
    const e = null !== localStorage.getItem("darkSwitch") && "dark" === localStorage.getItem("darkSwitch");
    (darkSwitch.checked = e), e ? document.body.setAttribute("data-theme", "dark") : document.body.removeAttribute("data-theme");
}
function resetTheme() {
    head = document.head || document.getElementsByTagName("head")[0],
    darkSwitch.checked ? (document.body.setAttribute("data-theme", "dark"), localStorage.setItem("darkSwitch", "dark")) : (document.body.removeAttribute("data-theme"), localStorage.removeItem("darkSwitch"), removeHeadStyle());
    
}
function removeHeadStyle() {
    var hs = document.getElementsByTagName('style');
    for (var i=0, max = hs.length; i < max; i++) {
        hs[i].parentNode.removeChild(hs[i]);
    }
}

window.addEventListener("load", () => {
    darkSwitch &&
        (initTheme(),
        darkSwitch.addEventListener("change", () => {
            resetTheme();
        }));
});
